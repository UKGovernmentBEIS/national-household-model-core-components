;; unzip -p stock.zip stock.json | jq 'select(.basicAttributes) | .basicAttributes | .buildYear, .dwellingCaseWeight ' | awk ' NR % 2 == 1 { YEAR = $1 } NR %2 == 0 { W[YEAR] += $1} END {T = 0; for (Y in W) {T = T + W[Y]; print "[", "<="Y, T, "]"}} '

(scenario
 start-date: 01/01/0014
 end-date:   01/01/2010
 stock-id:   blah
 quantum:    1000000

 (on.dates
  regularly
  (assert
   capture: [expected (summarize aggregate.count) sim.year]
   (= expected (summarize aggregate.count))))
 
 (def-function expected
   (~lookup-table
    row-keys: sim.year

    [years count]
    [ <15 0]
    [ <750 614]
    [ <1100 1796]
    [ <1348 2976]
    [ <1400 4689]
    [ <1450 6072]
    [ <1460 10127]
    [ <1492 10790]
    [ <1500 11804]
    [ <1540 17276]
    [ <1550 18808]
    [ <1573 21852]
    [ <1580 22442]
    [ <1598 27226]
    [ <1600 28251]
    [ <1610 46926]
    [ <1611 48220]
    [ <1612 50293]
    [ <1624 51246]
    [ <1628 52479]
    [ <1630 53733]
    [ <1634 55089]
    [ <1640 55953]
    [ <1649 57393]
    [ <1650 59091]
    [ <1660 73490]
    [ <1669 74930]
    [ <1670 76362]
    [ <1675 77215]
    [ <1676 78477]
    [ <1680 81473]
    [ <1690 89215]
    [ <1695 95858]
    [ <1700 97428]
    [ <1701 136108]
    [ <1710 138475]
    [ <1719 139525]
    [ <1720 140565]
    [ <1724 147454]
    [ <1735 148934]
    [ <1738 153360]
    [ <1740 154797]
    [ <1743 161056]
    [ <1749 162760]
    [ <1750 163688]
    [ <1756 216619]
    [ <1759 217725]
    [ <1760 219797]
    [ <1763 237252]
    [ <1767 237851]
    [ <1768 238663]
    [ <1770 240377]
    [ <1775 241156]
    [ <1778 242306]
    [ <1780 243528]
    [ <1781 260587]
    [ <1785 262054]
    [ <1790 263223]
    [ <1792 280520]
    [ <1795 281936]
    [ <1796 284578]
    [ <1800 285690]
    [ <1805 383808]
    [ <1806 385077]
    [ <1810 386435]
    [ <1812 404650]
    [ <1815 408669]
    [ <1816 412522]
    [ <1818 414223]
    [ <1820 415341]
    [ <1823 447651]
    [ <1824 449702]
    [ <1825 455281]
    [ <1826 469629]
    [ <1827 472583]
    [ <1828 473874]
    [ <1829 476971]
    [ <1830 480977]
    [ <1831 535688]
    [ <1832 537234]
    [ <1833 539696]
    [ <1834 540505]
    [ <1835 543150]
    [ <1836 547484]
    [ <1837 551143]
    [ <1839 557039]
    [ <1840 558373]
    [ <1841 671785]
    [ <1842 673593]
    [ <1844 675182]
    [ <1845 676515]
    [ <1846 687567]
    [ <1847 692396]
    [ <1848 694392]
    [ <1849 697594]
    [ <1850 741396]
    [ <1851 928764]
    [ <1852 936533]
    [ <1853 940862]
    [ <1855 941802]
    [ <1856 954088]
    [ <1857 956679]
    [ <1858 962653]
    [ <1859 965256]
    [ <1860 969767]
    [ <1861 1079649]
    [ <1862 1082302]
    [ <1863 1084457]
    [ <1864 1090198]
    [ <1865 1093192]
    [ <1866 1101030]
    [ <1867 1103139]
    [ <1868 1104287]
    [ <1869 1105348]
    [ <1870 1106268]
    [ <1871 1224924]
    [ <1872 1226133]
    [ <1873 1231403]
    [ <1874 1234010]
    [ <1875 1238713]
    [ <1876 1284207]
    [ <1877 1285424]
    [ <1878 1293786]
    [ <1879 1298887]
    [ <1880 1308013]
    [ <1881 1599769]
    [ <1882 1600252]
    [ <1883 1610242]
    [ <1884 1617658]
    [ <1885 1626550]
    [ <1886 1677215]
    [ <1887 1683125]
    [ <1888 1691490]
    [ <1889 1711364]
    [ <1890 1728470]
    [ <1891 2405677]
    [ <1892 2412857]
    [ <1893 2423825]
    [ <1894 2429105]
    [ <1895 2441037]
    [ <1896 2648323]
    [ <1897 2677862]
    [ <1898 2721578]
    [ <1899 2793531]
    [ <1900 2897402]
    [ <1901 3561372]
    [ <1902 3648289]
    [ <1903 3713886]
    [ <1904 3764816]
    [ <1905 3820567]
    [ <1906 4048351]
    [ <1907 4072439]
    [ <1908 4101875]
    [ <1909 4149304]
    [ <1910 4176502]
    [ <1911 4661216]
    [ <1912 4696174]
    [ <1913 4733561]
    [ <1914 4743018]
    [ <1915 4767639]
    [ <1916 4820073]
    [ <1917 4828818]
    [ <1918 4832602]
    [ <1919 4864567]
    [ <1920 4996076]
    [ <1921 5257786]
    [ <1922 5269837]
    [ <1923 5300601]
    [ <1924 5318032]
    [ <1925 5341400]
    [ <1926 5575512]
    [ <1927 5654133]
    [ <1928 5713416]
    [ <1929 5801725]
    [ <1930 5892507]
    [ <1931 6520860]
    [ <1932 6563535]
    [ <1933 6690691]
    [ <1934 6808598]
    [ <1935 6944295]
    [ <1936 7753784]
    [ <1937 8011694]
    [ <1938 8159413]
    [ <1939 8356892]
    [ <1940 8482583]
    [ <1941 8573063]
    [ <1942 8576142]
    [ <1943 8591266]
    [ <1944 8600940]
    [ <1945 8615337]
    [ <1946 8858743]
    [ <1947 8919315]
    [ <1948 9015912]
    [ <1949 9157058]
    [ <1950 9222028]
    [ <1951 10062364]
    [ <1952 10139942]
    [ <1953 10325931]
    [ <1954 10463273]
    [ <1955 10602060]
    [ <1956 11106797]
    [ <1957 11201665]
    [ <1958 11281850]
    [ <1959 11487926]
    [ <1960 11620478]
    [ <1961 12209190]
    [ <1962 12297487]
    [ <1963 12535273]
    [ <1964 12752379]
    [ <1965 13012469]
    [ <1966 13726044]
    [ <1967 13906471]
    [ <1968 14031079]
    [ <1969 14426554]
    [ <1970 14605586]
    [ <1971 15352555]
    [ <1972 15474501]
    [ <1973 15734043]
    [ <1974 15895022]
    [ <1975 16165084]
    [ <1976 16648147]
    [ <1977 16862398]
    [ <1978 16966611]
    [ <1979 17180925]
    [ <1980 17339807]
    [ <1981 17614214]
    [ <1982 17829115]
    [ <1983 18023670]
    [ <1984 18138562]
    [ <1985 18302095]
    [ <1986 18723352]
    [ <1987 18837870]
    [ <1988 18981860]
    [ <1989 19144506]
    [ <1990 19301521]
    [ <1991 19493800]
    [ <1992 19666625]
    [ <1993 19806142]
    [ <1994 19905490]
    [ <1995 20075303]
    [ <1996 20255943]
    [ <1997 20389988]
    [ <1998 20516993]
    [ <1999 20667670]
    [ <2000 20804667]
    [ <2001 20985693]
    [ <2002 21109015]
    [ <2003 21264108]
    [ <2004 21412401]
    [ <2005 21595893]
    [ <2006 21784183]
    [ <2007 21989490]
    [ <2008 22155400]
    [ <2009 22318447]
    [ <2010 22376660]
    [*      22385775]

    )))



